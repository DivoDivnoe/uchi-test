!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.START_X=0,t.END_X=20,t.FIRST_SUMMAND_START=6,t.FIRST_SUMMAND_END=9,t.SUM_START=11,t.SUM_END=14},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=document.querySelector(".app");t.default=function(e){r.innerHTML="",r.appendChild(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findArcLength=function(e,t){return Math.PI*e*t/180},t.findRadius=function(e,t){var n=t*Math.PI/180;return e/(2*Math.sin(n/2))},t.findArcHeight=function(e,t){return e+1-Math.sqrt(Math.pow(e,2)-Math.pow(t/2,2))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"_render",value:function(){var e=document.createElement("div");return e.classList.add("app-wrapper"),e.innerHTML=this.template,e}},{key:"template",get:function(){throw new Error("You have to define template")}},{key:"element",get:function(){return this._element||(this._element=this._render()),this._element}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(r=n(3))&&r.__esModule?r:{default:r},s=n(2),u=n(0),o=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.state=e,r.axisLength=n,r.arcs={alpha:120,width:2,items:[]},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"renderFirstStep",value:function(){var e=this.element.querySelector(".axis__arcs-wrapper--0"),t=this.element.querySelector(".app__title-item--first");this.renderLessonStep(e,this.state.firstSummand,t)}},{key:"renderSecondStep",value:function(){var e=this.element.querySelector(".axis__arcs-wrapper--1"),t=this.element.querySelector(".app__title-item--second");this.renderLessonStep(e,this.state.secondSummand,t)}},{key:"renderFinal",value:function(){var e=this.element.querySelector(".app__title-sum");e.classList.remove("app__title-sum--disabled"),e.disabled=!1,e.value="",this.initInput(e,this.state.sum,"app__title-sum")}},{key:"renderLessonStep",value:function(e,t,n){var r=this,i=e.querySelector(".axis__input");e.classList.add("axis__arcs-wrapper--active");var a=function(){r.initInput(i,t,"axis__input",n,"app__title-item")};setTimeout(function(){return r.animateArc(e,a)},0)}},{key:"animateArc",value:function(e,t){var n=this.arcs.items[this.state.currentStep],r=e.querySelector(".axis__arc--second");r.style.strokeDasharray=n.arcLength+" "+(n.circleLength-n.arcLength),e.querySelector(".axis__arc-arrow").classList.add("axis__arc-arrow--animate"),r.addEventListener("transitionend",t)}},{key:"initInput",value:function(e,t,n,r,i){var a=this;e.addEventListener("input",function e(s){var u=s.target,o=function(){r&&a.removeClass(r,i+"--wrong"),a.removeClass(u,n+"--wrong")};if(!u.value.length)return o(),!1;+u.value===t?(o(),a.disableInput(u,n+"--disabled",e),a.answerHandler()):(r&&a.addClass(r,i+"--wrong"),a.addClass(u,n+"--wrong"))}),e.classList.add("axis__input--active"),e.focus()}},{key:"disableInput",value:function(e,t,n){e.classList.add(t),e.disabled=!0,e.removeEventListener("input",n)}},{key:"removeClass",value:function(e,t){e.classList.contains(t)&&e.classList.remove(t)}},{key:"addClass",value:function(e,t){e.classList.contains(t)||e.classList.add(t)}},{key:"answerHandler",value:function(){}},{key:"template",get:function(){for(var e=this,t=[],n=this.axisLength/(u.END_X-u.START_X+1),r=0,i=u.START_X;i<=u.END_X;i++)t.push(i);return'\n      <h2 class="app__title">\n        <span \n          class="app__title-item app__title-item--first"\n        >'+this.state.firstSummand+'</span> + <span \n          class="app__title-item app__title-item--second"\n        >'+this.state.secondSummand+'</span> = <input \n          class="app__title-sum app__title-sum--disabled" \n          value="?" \n          disabled\n        >\n      </h2>\n      <div class="axis-wrapper">\n        <div class="axis" style="width: '+this.axisLength+'px">\n          '+t.map(function(e){return'\n      <div \n        class="axis__dash '+(e%5?"":"axis__dash--bold")+'" style="left: '+n*e+'px">\n        <span \n        class="axis__number '+(e%5?"":"axis__number--bold")+'"\n          >'+e+"</span>\n      </div>\n    "}).join("")+"\n          "+[this.state.firstSummand,this.state.secondSummand].map(function(t,i){var a=r,u=n*t;return r+=u,function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=(0,s.findRadius)(t,e.arcs.alpha),a=(0,s.findArcLength)(i,e.arcs.alpha),u=(0,s.findArcLength)(i,360),o=i+e.arcs.width/2,c=2*(i+e.arcs.width/2)+2,l=-(c-t)/2+r,d=-(0,s.findArcHeight)(i,t,e.arcs.width);return e.arcs.items.push({arcLength:a,circleLength:u}),'\n        <div class="axis__arcs-wrapper axis__arcs-wrapper--'+n+'" style="left:'+l+"px;top:"+d+'px">\n          <svg \n            class="axis__arcs" \n            width="'+c+'" \n            height="'+c+'" \n            viewPort="0 0 '+c+" "+c+'" \n            version="1.1" \n          xmlns="http://www.w3.org/2000/svg"\n          >\n            <circle \n              class="axis__arc axis__arc--first"\n              r="'+i+'"\n              cx="'+o+'"\n              cy="'+o+'"\n              fill="transparent"\n              stroke-width="'+e.arcs.width+'"\n            ></circle>\n            <circle\n              class="axis__arc axis__arc--second"\n              r="'+i+'"\n              cx="'+o+'"\n              cy="'+o+'"\n              fill="transparent"\n              stroke-width="'+e.arcs.width+'"\n              stroke-dasharray="0.001 '+u+'"\n            ></circle>\n          </svg>\n          <span \n            class="axis__arc-arrow" \n            style="top:'+-d+"px;left:"+((c-t)/2-e.arcs.width/2)+"px;transform-origin:"+(t/2+1.5)+"px "+(i+d+1)+'px;"></span>\n          <input class="axis__input" type="text">\n        </div>\n      '}(u,i,a)}).join("")+"\n        </div>\n      </div>\n    "}}]),t}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(4)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.screen=new i.default(this.model.state,n),this.routes=[function(){return r.screen.renderFirstStep()},function(){return r.screen.renderSecondStep()},function(){return r.screen.renderFinal()}]}return r(e,[{key:"start",value:function(){var e=this;this.screen.answerHandler=function(){return e.continueLesson()},(0,a.default)(this.screen.element),this.initStep()}},{key:"continueLesson",value:function(){if(this.model.state.complete)return console.log("Вы выполнили задание"),!1;this.model.nextStep(),this.initStep()}},{key:"initStep",value:function(){this.routes[this.model.state.currentStep]()}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initState()}return r(e,[{key:"initState",value:function(){return this.state=this.initialState,this.state}},{key:"nextStep",value:function(){++this.state.currentStep==this.state.steps-1&&(this.state.complete=!0)}},{key:"initialState",get:function(){var e=Math.floor((i.FIRST_SUMMAND_END-i.FIRST_SUMMAND_START+1)*Math.random()+i.FIRST_SUMMAND_START),t=Math.floor((i.SUM_END-i.SUM_START+1)*Math.random()+i.SUM_START);return{firstSummand:e,sum:t,secondSummand:t-e,steps:3,currentStep:0,complete:!1}}},{key:"firstSummand",get:function(){return this.state.firstSummand}},{key:"secondSummand",get:function(){return this.state.secondSummand}},{key:"sum",get:function(){return this.state.sum}}]),e}();t.default=a},function(e,t,n){"use strict";var r=a(n(6)),i=a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=document.body.clientWidth,n=t>900?815:t<550?300:480;return new i.default(e,n).start(),t};document.addEventListener("DOMContentLoaded",function(){var e=new r.default,t=s(e);window.addEventListener("resize",function(n){if(document.body.clientWidth===t)return!1;t=s(e)})})}]);
//# sourceMappingURL=main.min.js.map