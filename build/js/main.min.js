!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.START_X=0,t.END_X=20,t.FIRST_SUMMAND_START=6,t.FIRST_SUMMAND_END=9,t.SUM_START=11,t.SUM_END=14},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=document.querySelector(".app");t.default=function(e){console.log(e),r.innerHTML="",r.appendChild(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findArcLength=function(e,t){return Math.PI*e*t/180},t.findRadius=function(e,t){var n=t*Math.PI/180;return e/(2*Math.sin(n/2))},t.findArcHeight=function(e,t){return e+1-Math.sqrt(Math.pow(e,2)-Math.pow(t/2,2))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"_render",value:function(){var e=document.createElement("div");return e.classList.add("app-wrapper"),e.innerHTML=this.template,e}},{key:"template",get:function(){throw new Error("You have to define template")}},{key:"element",get:function(){return this._element||(this._element=this._render()),this._element}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(r=n(3))&&r.__esModule?r:{default:r},s=n(2),o=n(0),u=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.state=e,r.axisLength=n,r.arcs={alpha:120,width:2,items:[]},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),a(t,[{key:"renderFirstStep",value:function(){var e=this.element.querySelector(".axis__arcs-wrapper--0"),t=this.element.querySelector(".task__title-item--first");this.renderLessonStep(e,this.state.firstSummand,t)}},{key:"renderSecondStep",value:function(){var e=this.element.querySelector(".axis__arcs-wrapper--1"),t=this.element.querySelector(".task__title-item--second");this.renderLessonStep(e,this.state.secondSummand,t)}},{key:"renderFinal",value:function(){var e=this.element.querySelector(".task__title-sum");e.classList.remove("task__title-sum--disabled"),e.disabled=!1,e.value="",this.initInput(e,this.state.sum,"task__title-sum")}},{key:"renderLessonStep",value:function(e,t,n){var r=this,a=e.querySelector(".axis__input");e.classList.add("axis__arcs-wrapper--active");var i=function(){r.initInput(a,t,"axis__input",n,"task__title-item")};setTimeout(function(){return r.animateArc(e,i)},0)}},{key:"animateArc",value:function(e,t){var n=this.arcs.items[this.state.currentStep],r=e.querySelector(".axis__arc--second");r.style.strokeDasharray=n.arcLength+" "+(n.circleLength-n.arcLength),e.querySelector(".axis__arc-arrow").classList.add("axis__arc-arrow--animate"),r.addEventListener("transitionend",t)}},{key:"initInput",value:function(e,t,n,r,a){var i=this;e.addEventListener("input",function e(s){var o=s.target;+o.value===t?(r&&i.removeClass(r,a+"--wrong"),i.removeClass(o,n+"--wrong"),i.disableInput(o,n+"--disabled",e),i.answerHandler()):(r&&i.addClass(r,a+"--wrong"),i.addClass(o,n+"--wrong"))}),e.classList.add("axis__input--active"),e.focus()}},{key:"disableInput",value:function(e,t,n){e.classList.add(t),e.disabled=!0,e.removeEventListener("input",n)}},{key:"removeClass",value:function(e,t){e.classList.contains(t)&&e.classList.remove(t)}},{key:"addClass",value:function(e,t){e.classList.contains(t)||e.classList.add(t)}},{key:"answerHandler",value:function(){}},{key:"template",get:function(){for(var e=this,t=[],n=this.axisLength/(o.END_X-o.START_X+1),r=0,a=o.START_X;a<=o.END_X;a++)t.push(a);return'\n      <header class="task__header">\n        <h2 class="task__title">\n          <span \n            class="task__title-item task__title-item--first"\n          >'+this.state.firstSummand+'</span> + <span \n            class="task__title-item task__title-item--second"\n          >'+this.state.secondSummand+'</span> = <input \n            class="task__title-sum task__title-sum--disabled" \n            value="?" \n            disabled\n          >\n        </h2>\n      </header>\n      <div class="axis-wrapper">\n        <div class="axis" style="width: '+this.axisLength+'px">\n          '+t.map(function(e){return'\n      <div \n        class="axis__dash '+(e%5?"":"axis__dash--bold")+'" style="left: '+n*e+'px">\n        <span \n        class="axis__number '+(e%5?"":"axis__number--bold")+'"\n          >'+e+"</span>\n      </div>\n    "}).join("")+"\n          "+[this.state.firstSummand,this.state.secondSummand].map(function(t,a){var i=r,o=n*t;return r+=o,function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=(0,s.findRadius)(t,e.arcs.alpha),i=(0,s.findArcLength)(a,e.arcs.alpha),o=(0,s.findArcLength)(a,360),u=a+e.arcs.width/2,c=2*(a+e.arcs.width/2)+2,l=-(c-t)/2+r,d=-(0,s.findArcHeight)(a,t,e.arcs.width);return e.arcs.items.push({arcLength:i,circleLength:o}),'\n        <div class="axis__arcs-wrapper axis__arcs-wrapper--'+n+'" style="left:'+l+"px;top:"+d+'px">\n          <svg \n            class="axis__arcs" \n            width="'+c+'" \n            height="'+c+'" \n            viewPort="0 0 '+c+" "+c+'" \n            version="1.1" \n            xmlns="http://www.w3.org/2000/svg"\n          >\n            <defs>\n              <marker id="arrowhead" markerWidth="5" markerHeight="3" refX="0" refY="1.5" orient="auto" stroke="#ff0000">\n                <polygon points="0 0, 5 1.5, 0 3" fill="#ff0000"/>\n              </marker>\n            </defs>\n            <circle \n              class="axis__arc axis__arc--first"\n              r="'+a+'"\n              cx="'+u+'"\n              cy="'+u+'"\n              fill="transparent"\n              stroke-width="'+e.arcs.width+'"\n            ></circle>\n            <circle\n              class="axis__arc axis__arc--second"\n              r="'+a+'"\n              cx="'+u+'"\n              cy="'+u+'"\n              fill="transparent"\n              stroke-width="'+e.arcs.width+'"\n              stroke-dasharray="0.001 '+o+'"\n            ></circle>\n            <line \n              class="axis__arc-arrow"\n              x1="'+(c-2)+'" \n              y1="'+(c/2-1)+'" \n              x2="'+(c-2)+'" \n              y2="'+(c/2+.001-1)+'" \n              stroke="#ff0000" stroke-width="2" \n              marker-end="url(#arrowhead)"\n            >\n          </svg>\n          <input class="axis__input" type="text">\n        </div>\n      '}(o,a,i)}).join("")+"\n        </div>\n      </div>\n    "}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=s(n(4)),i=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.screen=new a.default(this.model.state,n),this.routes=[function(){return r.screen.renderFirstStep()},function(){return r.screen.renderSecondStep()},function(){return r.screen.renderFinal()}]}return r(e,[{key:"start",value:function(){var e=this;this.screen.answerHandler=function(){return e.continueLesson()},(0,i.default)(this.screen.element),this.initStep()}},{key:"continueLesson",value:function(){if(this.model.state.complete)return console.log("Вы выполнили задание"),!1;this.model.nextStep(),this.initStep()}},{key:"initStep",value:function(){this.routes[this.model.state.currentStep]()}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initState()}return r(e,[{key:"initState",value:function(){return this.state=this.initialState,this.state}},{key:"nextStep",value:function(){++this.state.currentStep==this.state.steps-1&&(this.state.complete=!0)}},{key:"initialState",get:function(){var e=Math.floor((a.FIRST_SUMMAND_END-a.FIRST_SUMMAND_START+1)*Math.random()+a.FIRST_SUMMAND_START),t=Math.floor((a.SUM_END-a.SUM_START+1)*Math.random()+a.SUM_START);return{firstSummand:e,sum:t,secondSummand:t-e,steps:3,currentStep:0,complete:!1}}},{key:"firstSummand",get:function(){return this.state.firstSummand}},{key:"secondSummand",get:function(){return this.state.secondSummand}},{key:"sum",get:function(){return this.state.sum}}]),e}();t.default=i},function(e,t,n){"use strict";var r=i(n(6)),a=i(n(5));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=document.body.clientWidth,n=t>900?815:t<550?300:480;new a.default(e,n).start()};document.addEventListener("DOMContentLoaded",function(){var e=new r.default;s(e),window.addEventListener("resize",function(){return s(e)})})}]);
//# sourceMappingURL=main.min.js.map